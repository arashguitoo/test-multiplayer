<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚öîÔ∏è Team Battle - Konnektoren</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:linear-gradient(135deg,#1a1a2e 0%,#16213e 50%,#0f3460 100%);min-height:100vh;color:#fff}.container{max-width:900px;margin:0 auto;padding:15px}h1{text-align:center;font-size:1.4em;margin-bottom:15px}#login-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:85vh;gap:15px}.logo{font-size:3.5em}#login-screen h2{font-size:1.1em;color:#ffd700;text-align:center}.input-group{display:flex;flex-direction:column;gap:10px;width:100%;max-width:300px}.input-group input,.input-group select{font-size:1.1em;padding:12px 20px;border:2px solid #ffd700;border-radius:25px;text-align:center;background:rgba(255,255,255,.1);color:#fff}.input-group select option{background:#1a1a2e;color:#fff}.input-group input::placeholder{color:rgba(255,255,255,.5)}.input-group input.code-input{font-size:1.4em;letter-spacing:8px;text-transform:uppercase}.btn-primary{font-size:1.1em;padding:15px 40px;border:none;border-radius:30px;background:linear-gradient(135deg,#e74c3c,#c0392b);color:#fff;font-weight:700;cursor:pointer;width:100%;max-width:300px}.btn-secondary{font-size:1em;padding:12px 30px;border:2px solid #ffd700;border-radius:25px;background:0 0;color:#ffd700;cursor:pointer;width:100%;max-width:300px}.divider{display:flex;align-items:center;gap:15px;width:100%;max-width:300px;margin:5px 0}.divider::before,.divider::after{content:'';flex:1;height:1px;background:rgba(255,255,255,.3)}.divider span{color:#888}#lobby-screen{display:none;text-align:center}.lobby-box{background:rgba(255,255,255,.1);border-radius:20px;padding:25px;margin:20px 0}.lobby-code{font-size:2.5em;color:#ffd700;letter-spacing:10px;margin:10px 0}.teams-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin:20px 0}@media(max-width:500px){.teams-grid{grid-template-columns:1fr}}.team-box{background:rgba(255,255,255,.05);border-radius:15px;padding:15px;border:2px solid rgba(255,255,255,.1)}.team-box h3{margin-bottom:10px}.team-players{min-height:40px;display:flex;flex-wrap:wrap;gap:5px}.team-player{padding:5px 10px;background:rgba(255,255,255,.1);border-radius:10px;font-size:.85em}.start-game-btn{font-size:1.2em;padding:15px 50px;border:none;border-radius:30px;background:linear-gradient(135deg,#e74c3c,#c0392b);color:#fff;font-weight:700;cursor:pointer;margin:15px 0}.start-game-btn:disabled{opacity:.5;cursor:not-allowed}.small-btn{font-size:.85em;padding:8px 15px;border:1px solid rgba(255,255,255,.3);border-radius:15px;background:0 0;color:#aaa;cursor:pointer;margin:5px}.small-btn.danger{border-color:#e74c3c;color:#e74c3c}#game-screen{display:none}.scoreboard{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:15px}@media(max-width:600px){.scoreboard{grid-template-columns:1fr 1fr}}.team-score{padding:12px;border-radius:12px;text-align:center}.team-score.mond{background:rgba(156,136,255,.2);border:2px solid #9c88ff}.team-score.sonne{background:rgba(255,177,66,.2);border:2px solid #ffb142}.team-score.stern{background:rgba(255,107,129,.2);border:2px solid #ff6b81}.team-score.ozean{background:rgba(34,166,179,.2);border:2px solid #22a6b3}.team-score .emoji{font-size:1.5em}.team-score .name{font-size:.85em;color:#aaa}.team-score .points{font-size:1.3em;font-weight:700}.game-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding:12px 15px;background:rgba(255,255,255,.1);border-radius:15px;flex-wrap:wrap;gap:10px}.player-info{display:flex;align-items:center;gap:10px}.player-name{font-weight:700;color:#ffd700}.timer{font-size:2em;font-weight:700;color:#00cec9;min-width:50px;text-align:center}.timer.warning{color:#fdcb6e}.timer.danger{color:#e74c3c;animation:pulse .5s infinite}@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}.question-num{color:#ffd700}.quiz-section{background:rgba(255,255,255,.05);border:2px solid rgba(255,215,0,.3);border-radius:20px;padding:20px;margin-bottom:15px}.category-badge{display:inline-block;padding:5px 15px;background:rgba(255,215,0,.2);border-radius:20px;font-size:.85em;color:#ffd700;margin-bottom:12px}.question{font-size:1.2em;margin-bottom:20px;line-height:1.4}.answers{display:grid;grid-template-columns:1fr 1fr;gap:10px}@media(max-width:500px){.answers{grid-template-columns:1fr}}.answer-btn{padding:14px;font-size:1em;border:2px solid rgba(255,255,255,.3);border-radius:12px;background:rgba(255,255,255,.05);color:#fff;cursor:pointer;text-align:center}.answer-btn:hover:not(:disabled){background:rgba(255,215,0,.2);border-color:#ffd700}.answer-btn.selected{background:rgba(108,92,231,.4);border-color:#6c5ce7}.answer-btn.correct{background:rgba(0,184,148,.7)!important;border-color:#00b894!important;box-shadow:0 0 20px rgba(0,184,148,.5)}.answer-btn.wrong{background:rgba(214,48,49,.7)!important;border-color:#d63031!important}.answer-btn:disabled{cursor:not-allowed}.answer-status{text-align:center;padding:12px;margin-top:15px;border-radius:10px;font-weight:700;display:none}.answer-status.show{display:block}.answer-status.waiting{background:rgba(108,92,231,.3);color:#a29bfe}.answer-status.correct{background:rgba(0,184,148,.3);color:#55efc4}.answer-status.wrong{background:rgba(214,48,49,.3);color:#ff7675}.answer-status.timeout{background:rgba(253,203,110,.3);color:#fdcb6e}#gameover-screen{display:none;text-align:center;padding:30px 20px}.result-icon{font-size:4em;margin-bottom:15px}.final-scores{background:rgba(255,255,255,.1);border-radius:15px;padding:20px;margin-bottom:20px}.final-team{display:flex;justify-content:space-between;align-items:center;padding:12px;margin-bottom:8px;border-radius:10px}.final-team.winner{background:rgba(255,215,0,.2);border:2px solid #ffd700}.connection-status{position:fixed;top:10px;right:10px;padding:5px 10px;border-radius:12px;font-size:.75em;background:rgba(0,0,0,.5)}.connection-status.connected{color:#00b894}.error-msg{color:#e74c3c;font-size:.9em;margin-top:10px}
    </style>
</head>
<body>
    <div class="connection-status" id="connection-status">Verbinde...</div>
    <div class="container">
        <h1>‚öîÔ∏è Team Battle - Konnektoren</h1>
        <div id="login-screen"><div class="logo">‚öîÔ∏è</div><h2>4 Teams k√§mpfen!<br><small style="color:#aaa">dass, weil, denn, trotzdem, wenn, als</small></h2><div class="input-group"><input type="text" id="player-name" placeholder="Dein Name" maxlength="15"><select id="team-select"><option value="">-- Team w√§hlen --</option><option value="mond">üåô Expedition Mond</option><option value="sonne">‚òÄÔ∏è Expedition Sonne</option><option value="stern">‚≠ê Expedition Stern</option><option value="ozean">üåä Expedition Ozean</option></select><input type="text" id="game-code" class="code-input" placeholder="CODE" maxlength="4"></div><button class="btn-primary" id="join-btn">üö™ Beitreten</button><div class="divider"><span>oder</span></div><button class="btn-secondary" id="create-btn">üëë Neues Spiel erstellen</button><div class="error-msg" id="error-msg"></div></div>
        <div id="lobby-screen"><div class="lobby-box"><h2>‚è≥ Warteraum</h2><div class="lobby-code" id="lobby-code">CODE</div><p style="color:#888;font-size:.85em">Teile diesen Code</p><div class="teams-grid"><div class="team-box" style="border-color:#9c88ff"><h3>üåô Mond</h3><div class="team-players" id="team-mond"></div></div><div class="team-box" style="border-color:#ffb142"><h3>‚òÄÔ∏è Sonne</h3><div class="team-players" id="team-sonne"></div></div><div class="team-box" style="border-color:#ff6b81"><h3>‚≠ê Stern</h3><div class="team-players" id="team-stern"></div></div><div class="team-box" style="border-color:#22a6b3"><h3>üåä Ozean</h3><div class="team-players" id="team-ozean"></div></div></div><div id="host-controls"><button class="start-game-btn" id="start-btn" disabled>‚ñ∂Ô∏è SPIEL STARTEN</button><p style="color:#00b894;font-size:.85em">üëë Du bist der Spielleiter</p><div><button class="small-btn danger" id="reset-btn">üîÑ Zur√ºcksetzen</button></div></div><div id="player-controls" style="display:none"><p style="color:#fdcb6e">‚è≥ Warte auf Spielleiter...</p></div></div></div>
        <div id="game-screen"><div class="scoreboard"><div class="team-score mond"><div class="emoji">üåô</div><div class="name">Mond</div><div class="points" id="score-mond">0</div></div><div class="team-score sonne"><div class="emoji">‚òÄÔ∏è</div><div class="name">Sonne</div><div class="points" id="score-sonne">0</div></div><div class="team-score stern"><div class="emoji">‚≠ê</div><div class="name">Stern</div><div class="points" id="score-stern">0</div></div><div class="team-score ozean"><div class="emoji">üåä</div><div class="name">Ozean</div><div class="points" id="score-ozean">0</div></div></div><div class="game-header"><div class="player-info"><span class="player-name" id="display-name"></span><span id="display-team"></span></div><div class="timer" id="timer">15</div><div class="question-num" id="question-num">1/30</div></div><div class="quiz-section"><div class="category-badge" id="category"></div><div class="question" id="question"></div><div class="answers" id="answers"></div><div class="answer-status" id="answer-status"></div></div></div>
        <div id="gameover-screen"><div class="result-icon" id="result-icon">üèÜ</div><h2 id="result-title">Spiel beendet!</h2><div class="final-scores" id="final-scores"></div><button class="btn-primary" id="back-btn">üè† Zur√ºck</button></div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded',function(){firebase.initializeApp({apiKey:"AIzaSyBDChXlm34Kr7Gg0Dw458GiiwoLnWJAnxM",authDomain:"lern-deutsch-arash.firebaseapp.com",databaseURL:"https://lern-deutsch-arash-default-rtdb.europe-west1.firebasedatabase.app",projectId:"lern-deutsch-arash"});const db=firebase.database();
    const questions=[{cat:"dass",q:"Ich hoffe, ___ du morgen kommst.",a:["dass","weil","denn","wenn"],c:0},{cat:"dass",q:"Er sagt, ___ er keine Zeit hat.",a:["dass","weil","trotzdem","denn"],c:0},{cat:"dass",q:"Ich wei√ü, ___ das schwer ist.",a:["dass","wenn","als","denn"],c:0},{cat:"dass",q:"Es ist wichtig, ___ du p√ºnktlich bist.",a:["dass","weil","denn","trotzdem"],c:0},{cat:"dass",q:"Ich glaube, ___ er recht hat.",a:["dass","wenn","weil","als"],c:0},{cat:"weil",q:"Ich bleibe zu Hause, ___ ich krank bin.",a:["weil","dass","denn","trotzdem"],c:0},{cat:"weil",q:"Sie ist m√ºde, ___ sie lange gearbeitet hat.",a:["weil","dass","wenn","als"],c:0},{cat:"weil",q:"Er lernt Deutsch, ___ er in Deutschland arbeiten will.",a:["weil","denn","dass","trotzdem"],c:0},{cat:"weil",q:"Ich kann nicht kommen, ___ ich einen Termin habe.",a:["weil","dass","denn","wenn"],c:0},{cat:"weil",q:"Sie weint, ___ sie traurig ist.",a:["weil","dass","trotzdem","als"],c:0},{cat:"denn",q:"Ich gehe nicht raus, ___ es regnet.",a:["denn","weil","dass","trotzdem"],c:0},{cat:"denn",q:"Er isst nichts, ___ er hat keinen Hunger.",a:["denn","weil","dass","wenn"],c:0},{cat:"denn",q:"Sie kommt sp√§ter, ___ sie muss noch arbeiten.",a:["denn","weil","dass","als"],c:0},{cat:"denn",q:"Ich helfe dir, ___ du bist mein Freund.",a:["denn","weil","dass","trotzdem"],c:0},{cat:"denn",q:"Wir fahren mit dem Bus, ___ das Auto ist kaputt.",a:["denn","weil","dass","wenn"],c:0},{cat:"trotzdem",q:"Es regnet. ___ gehe ich spazieren.",a:["Trotzdem","Weil","Dass","Denn"],c:0},{cat:"trotzdem",q:"Er ist m√ºde. ___ arbeitet er weiter.",a:["Trotzdem","Weil","Wenn","Denn"],c:0},{cat:"trotzdem",q:"Ich habe Kopfschmerzen. ___ gehe ich zur Arbeit.",a:["Trotzdem","Dass","Weil","Als"],c:0},{cat:"trotzdem",q:"Das Essen ist teuer. ___ kaufe ich es.",a:["Trotzdem","Denn","Weil","Wenn"],c:0},{cat:"trotzdem",q:"Sie hat wenig Zeit. ___ hilft sie mir.",a:["Trotzdem","Dass","Weil","Denn"],c:0},{cat:"wenn",q:"___ du kommst, freue ich mich.",a:["Wenn","Als","Dass","Weil"],c:0},{cat:"wenn",q:"___ es regnet, bleibe ich zu Hause.",a:["Wenn","Als","Denn","Trotzdem"],c:0},{cat:"wenn",q:"Ich rufe dich an, ___ ich fertig bin.",a:["wenn","als","dass","denn"],c:0},{cat:"wenn",q:"___ ich Zeit habe, lese ich gern.",a:["Wenn","Als","Weil","Dass"],c:0},{cat:"wenn",q:"Er wird gl√ºcklich sein, ___ er das h√∂rt.",a:["wenn","als","denn","trotzdem"],c:0},{cat:"als",q:"___ ich ein Kind war, wohnte ich in Berlin.",a:["Als","Wenn","Weil","Dass"],c:0},{cat:"als",q:"___ er ankam, war es schon dunkel.",a:["Als","Wenn","Denn","Trotzdem"],c:0},{cat:"als",q:"Ich war traurig, ___ du gegangen bist.",a:["als","wenn","dass","weil"],c:0},{cat:"als",q:"___ ich jung war, spielte ich Fu√üball.",a:["Als","Wenn","Weil","Denn"],c:0},{cat:"als",q:"Sie hat geweint, ___ sie den Film gesehen hat.",a:["als","wenn","dass","trotzdem"],c:0}];
    const teamEmoji={mond:"üåô",sonne:"‚òÄÔ∏è",stern:"‚≠ê",ozean:"üåä"};
    let gameCode,playerId,playerName,playerTeam,isHost=false,currentQ=-1,answered=false,selected=null,timerInt=null,gameRef,playersRef,scoresRef,allPlayers=[],teamScores={mond:0,sonne:0,stern:0,ozean:0},evaluating=false;
    db.ref(".info/connected").on("value",s=>{const el=document.getElementById("connection-status");el.textContent=s.val()?"üü¢ Online":"üî¥ Offline";el.className="connection-status "+(s.val()?"connected":"disconnected")});
    function genCode(){const c="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";return Array(4).fill(0).map(()=>c[Math.floor(Math.random()*c.length)]).join('')}
    function showError(m){document.getElementById("error-msg").textContent=m;setTimeout(()=>document.getElementById("error-msg").textContent="",3000)}
    document.getElementById("create-btn").onclick=createGame;document.getElementById("join-btn").onclick=joinGame;document.getElementById("start-btn").onclick=startGame;
    document.getElementById("reset-btn").onclick=resetGame;document.getElementById("back-btn").onclick=backToHome;
    document.getElementById("game-code").onkeypress=e=>{if(e.key==="Enter")joinGame()};
    function createGame(){playerName=document.getElementById("player-name").value.trim();playerTeam=document.getElementById("team-select").value;if(!playerName){showError("Name eingeben!");return}if(!playerTeam){showError("Team w√§hlen!");return}gameCode=genCode();playerId="host_"+Date.now();isHost=true;gameRef=db.ref("teambattle/"+gameCode);playersRef=db.ref("teambattle/"+gameCode+"/players");scoresRef=db.ref("teambattle/"+gameCode+"/scores");gameRef.remove().then(()=>gameRef.set({status:"lobby",currentQuestion:-1,questionStart:null,host:playerId})).then(()=>scoresRef.set({mond:0,sonne:0,stern:0,ozean:0})).then(()=>playersRef.child(playerId).set({name:playerName,team:playerTeam,isHost:true,answered:false})).then(()=>{playersRef.child(playerId).onDisconnect().remove();showLobby();setupListeners()})}
    function joinGame(){playerName=document.getElementById("player-name").value.trim();playerTeam=document.getElementById("team-select").value;gameCode=document.getElementById("game-code").value.trim().toUpperCase();if(!playerName){showError("Name eingeben!");return}if(!playerTeam){showError("Team w√§hlen!");return}if(!gameCode||gameCode.length!==4){showError("4-stelliger Code!");return}playerId="p_"+Date.now()+"_"+Math.random().toString(36).substr(2,4);isHost=false;gameRef=db.ref("teambattle/"+gameCode);playersRef=db.ref("teambattle/"+gameCode+"/players");scoresRef=db.ref("teambattle/"+gameCode+"/scores");gameRef.once("value").then(s=>{if(!s.exists()){showError("Spiel nicht gefunden!");return Promise.reject()}if(s.val().status!=="lobby"){showError("Spiel l√§uft bereits!");return Promise.reject()}return playersRef.child(playerId).set({name:playerName,team:playerTeam,isHost:false,answered:false})}).then(()=>{playersRef.child(playerId).onDisconnect().remove();showLobby();setupListeners()}).catch(()=>{})}
    function showLobby(){document.getElementById("login-screen").style.display="none";document.getElementById("lobby-screen").style.display="block";document.getElementById("lobby-code").textContent=gameCode;document.getElementById("host-controls").style.display=isHost?"block":"none";document.getElementById("player-controls").style.display=isHost?"none":"block"}
    function setupListeners(){playersRef.on("value",snap=>{const players=[];snap.forEach(c=>{const d=c.val();if(d&&d.name)players.push({id:c.key,...d})});allPlayers=players;updatePlayers(players);checkAllAnswered()});scoresRef.on("value",snap=>{const s=snap.val();if(s){teamScores=s;updateScores()}});gameRef.on("value",snap=>{const game=snap.val();if(!game){backToHome();return}if(game.status==="playing"){document.getElementById("lobby-screen").style.display="none";document.getElementById("game-screen").style.display="block";if(game.currentQuestion!==currentQ){currentQ=game.currentQuestion;evaluating=false;showQuestion(game.questionStart)}}else if(game.status==="finished"){endGame()}})}
    function updatePlayers(players){["mond","sonne","stern","ozean"].forEach(t=>{document.getElementById("team-"+t).innerHTML=players.filter(p=>p.team===t).map(p=>`<div class="team-player">${p.name}${p.isHost?' üëë':''}</div>`).join("")||'<span style="color:#666;font-size:.8em">Leer</span>'});document.getElementById("start-btn").disabled=players.filter(p=>!p.isHost).length===0}
    function updateScores(){["mond","sonne","stern","ozean"].forEach(t=>{document.getElementById("score-"+t).textContent=teamScores[t]||0})}
    function checkAllAnswered(){if(evaluating||currentQ<0)return;if(allPlayers.length>0&&allPlayers.every(p=>p.answered)){evaluating=true;if(timerInt)clearInterval(timerInt);evaluate()}}
    function resetGame(){if(!confirm("Zur√ºcksetzen?"))return;gameRef.update({status:"lobby",currentQuestion:-1,questionStart:null});scoresRef.set({mond:0,sonne:0,stern:0,ozean:0});playersRef.once("value",s=>s.forEach(c=>playersRef.child(c.key).update({answered:false})));currentQ=-1;evaluating=false;["game-screen","gameover-screen"].forEach(id=>document.getElementById(id).style.display="none");document.getElementById("lobby-screen").style.display="block"}
    function startGame(){if(!isHost)return;playersRef.once("value",s=>{s.forEach(c=>playersRef.child(c.key).update({answered:false}));gameRef.update({status:"playing",currentQuestion:0,questionStart:Date.now()})})}
    function showQuestion(startTime){if(currentQ>=questions.length){gameRef.update({status:"finished"});return}answered=false;selected=null;playersRef.child(playerId).update({answered:false});const q=questions[currentQ];document.getElementById("display-name").textContent=playerName;document.getElementById("display-team").textContent=teamEmoji[playerTeam];document.getElementById("question-num").textContent=`${currentQ+1}/${questions.length}`;document.getElementById("category").textContent=q.cat;document.getElementById("question").textContent=q.q;
    const idx=[0,1,2,3];for(let i=idx.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[idx[i],idx[j]]=[idx[j],idx[i]]}
    const ans=document.getElementById("answers");ans.innerHTML="";idx.forEach(origIdx=>{const btn=document.createElement("button");btn.className="answer-btn";btn.textContent=q.a[origIdx];btn.dataset.origIdx=origIdx;btn.onclick=()=>selectAnswer(btn,origIdx);ans.appendChild(btn)});document.getElementById("answer-status").className="answer-status";startTimer(startTime)}
    function selectAnswer(btn,idx){if(answered)return;answered=true;selected=idx;document.querySelectorAll(".answer-btn").forEach(b=>{b.disabled=true;b.classList.remove("selected")});btn.classList.add("selected");playersRef.child(playerId).update({answered:true});const st=document.getElementById("answer-status");st.className="answer-status waiting show";st.textContent="‚úì Warte auf andere..."}
    function startTimer(startTime){if(timerInt)clearInterval(timerInt);const el=document.getElementById("timer");function tick(){const rem=Math.max(0,15-Math.floor((Date.now()-startTime)/1000));el.textContent=rem;el.className="timer"+(rem<=3?" danger":rem<=5?" warning":"");if(rem===0){clearInterval(timerInt);if(!evaluating){evaluating=true;evaluate()}}}tick();timerInt=setInterval(tick,200)}
    function evaluate(){const q=questions[currentQ];const st=document.getElementById("answer-status");document.querySelectorAll(".answer-btn").forEach(btn=>{btn.disabled=true;if(parseInt(btn.dataset.origIdx)===q.c)btn.classList.add("correct")});if(!answered){st.className="answer-status timeout show";st.textContent="‚è∞ Zeit abgelaufen!"}else if(selected===q.c){st.className="answer-status correct show";st.textContent="‚úÖ Richtig! +1 f√ºr "+teamEmoji[playerTeam];scoresRef.child(playerTeam).transaction(v=>(v||0)+1)}else{document.querySelectorAll(".answer-btn").forEach(btn=>{if(parseInt(btn.dataset.origIdx)===selected)btn.classList.add("wrong")});st.className="answer-status wrong show";st.textContent="‚ùå Falsch!"}if(isHost)setTimeout(()=>{playersRef.once("value",s=>{s.forEach(c=>playersRef.child(c.key).update({answered:false}));if(currentQ+1>=questions.length)gameRef.update({status:"finished"});else gameRef.update({currentQuestion:currentQ+1,questionStart:Date.now()})})},3000)}
    function endGame(){if(timerInt)clearInterval(timerInt);document.getElementById("game-screen").style.display="none";document.getElementById("gameover-screen").style.display="block";const sorted=Object.entries(teamScores).sort((a,b)=>b[1]-a[1]);const winner=sorted[0];document.getElementById("result-icon").textContent=teamEmoji[winner[0]];document.getElementById("result-title").textContent=`${teamEmoji[winner[0]]} gewinnt mit ${winner[1]} Punkten!`;document.getElementById("final-scores").innerHTML=sorted.map((t,i)=>`<div class="final-team ${i===0?'winner':''}"><span>${teamEmoji[t[0]]} ${t[0].charAt(0).toUpperCase()+t[0].slice(1)}</span><span style="font-size:1.3em;font-weight:700">${t[1]}</span></div>`).join("")}
    function backToHome(){if(timerInt)clearInterval(timerInt);if(gameRef)gameRef.off();if(playersRef){playersRef.off();if(playerId)playersRef.child(playerId).remove()}if(scoresRef)scoresRef.off();gameCode=playerId=null;isHost=false;currentQ=-1;evaluating=false;teamScores={mond:0,sonne:0,stern:0,ozean:0};["lobby-screen","game-screen","gameover-screen"].forEach(id=>document.getElementById(id).style.display="none");document.getElementById("login-screen").style.display="flex";document.getElementById("game-code").value="";document.getElementById("team-select").value=""}});
    </script>
    <script data-goatcounter="https://aguitoo.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>
</html>
